@startuml analysis

class Connect4 {

    + initConnect4()
    + play()
}
Connect4 *--> YesNoDialog
Connect4 ..> GameView

class YesNoDialog #LightGreen {  
    - question
    - answer   
    - YES
    - NO

    + initYesNoDialog(question)
    + ask()
    + isAffirmative()
}

class GameView #LightGreen {
    + initGameView()
    + play()
}
GameView *--> Game
GameView *--> PlayerView
GameView *--> BoardView

class Game {     

    + initGame()
    + addPlayerToken(column)
    + getColumnsCount()
    + isColumnFull(columnIndex)
    + isPlayerWinner()    
    + changeTurn()
    + getTurn()
    + getBoard()
}
Game *--> Turn
Game *--> Board

class PlayerView #LightGreen {
    + initTurnView(game)
    + askColumn()
    + showErrorFullColumn()
    + win()
}
PlayerView --> Turn
PlayerView ..> Game
PlayerView *--> LimitedIntDialog : columnDialog

class Turn {
    - turnValue

    + initTurn(numPlayers, board)  
    + getPlayerId()      
    + addPlayerToken(column)        
    + isPlayerWinner()
    + change()    
}
Turn *--> "numPlayers" Color : playersColors
Turn --> Board

class BoardView #LightGreen {
    - CELL_CHARS_COUNT
    - ROW_SEPARATOR

    + initBoardView(game)
    + show()
}
BoardView --> Board
BoardView ..> Color
BoardView ..> Game

class Board {
    - ROWS = 6
    - COLUMNS = 7
    
    + initBoard(numPlayers)
    + isColumnFull(column)
    + placeToken(column, color)
    + getColor(row, column)
    + isWinner(color)    
    + getRowsCount()
    + getColumnsCount()
}
Board *--> "0..ROWS x COLUMNS" Coordinate : playersPlaceds
Board ..> ClosedInterval
Board ..> Direction
Board ..> Color

class Coordinate {
    - row
    - column 

    + initCoordinate(row, column)
    + shift(rowShift, columnShift)
    + equals(other)   
    + hasRowInInterval(interval)
    + hasColumnInInterval(interval)
}
Coordinate ..> ClosedInterval

class ClosedInterval {
    - max
    - min

    + initClosedInterval(max, min = 0)
    + includes(value)
    + toString()
}

enum Direction {
    VERTICAL
    HORIZONTAL
    DIAGONAL
    INVERSE_DIAGONAL

    - initDirection(rowShift, columnShift)
    + {static} values()
    + shift(coordinate, forward)
}
Direction ..> Coordinate

enum Color {
    + X
    + O   
    + NONE 

    - initColor(value)
    + {static} get(ordinal) 
    + {static} values()  
    + ordinal()
    + isNone()
    + toString()
}



class LimitedIntDialog #LightGreen {
    - requested
    - prefix
    
    + initLimitedIntDialog(requested, max, min = 1, prefix = "") 
    + ask()
    + setPrefix(prefix)
}
LimitedIntDialog *--> ClosedInterval : limits

@enduml